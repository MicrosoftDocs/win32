---
title: Ack for Fragment
description: Use the Ack for Fragment packet to acknowledge the client's Fragment request.
ms.assetid: f5466489-2d5e-4850-a39c-37bc4923a7ac
keywords:
- Ack for Fragment BITS
topic_type:
- apiref
api_name:
- Ack for Fragment
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
---

# Ack for Fragment

Use the **Ack for Fragment** packet to acknowledge the client's [**Fragment**](fragment.md) request.

``` syntax
reason-code reason-description
BITS-Packet-Type: Ack
BITS-Session-Id: {guid}
BITS-Received-Content-Range: range
BITS-Reply-URL: url
Content-Length: length
BITS-Error-Code: error-code
BITS-Error-Context: error-context
```

## Headers

<dl> <dt>

<span id="reason-code"></span><span id="REASON-CODE"></span>reason-code
</dt> <dd>

Replace reason-code with an HTTP reason code. The following table shows the typical reason codes for a response to a [**Fragment**](fragment.md) request. For a list of HTTP reason codes, see [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt).



| Reason code    | Description                                                                                                            |
|----------------|------------------------------------------------------------------------------------------------------------------------|
| 200<br/> | OK. The request was successful.<br/>                                                                             |
| 416<br/> | Range-Not-Satisfiable. The client sent a fragment whose range is not contiguous with the previous fragment.<br/> |



 

</dd> <dt>

<span id="reason-description"></span><span id="REASON-DESCRIPTION"></span>reason-description
</dt> <dd>

Replace reason-description with the HTTP description associated with the reason code. For example, set reason-description to OK if reason-code is 200.

</dd> <dt>

<span id="BITS-Packet-Type"></span><span id="bits-packet-type"></span><span id="BITS-PACKET-TYPE"></span>BITS-Packet-Type
</dt> <dd>

Identifies this response packet as an Ack packet.

</dd> <dt>

<span id="BITS-Received-Content-Range"></span><span id="bits-received-content-range"></span><span id="BITS-RECEIVED-CONTENT-RANGE"></span>BITS-Received-Content-Range
</dt> <dd>

Zero-based offset to the next byte the server expects the client to send. For example, if the fragment contained the range 128 212, you would set range to 213.

</dd> <dt>

<span id="BITS-Session-Id"></span><span id="bits-session-id"></span><span id="BITS-SESSION-ID"></span>BITS-Session-Id
</dt> <dd>

String GUID that identifies the session to the client. Replace {guid} with the session identifier that the client sent in the [**Fragment**](fragment.md) request packet. If you do not recognize the session identifier, set the BITS-Error-Code header to BG\_E\_SESSION\_NOT\_FOUND.

</dd> <dt>

<span id="BITS-Reply-URL"></span><span id="bits-reply-url"></span><span id="BITS-REPLY-URL"></span>BITS-Reply-URL
</dt> <dd>

Contains the URL to the reply data of an upload-reply job. Include this header in the final fragment response after the upload is complete and you receive a response from the server application, if applicable.

Use the Content-Range header from the Fragment request to determine whether the upload is complete. The upload is complete if the end offset of the range value equals the total-length value minus one.

The BITS server posts the upload file to the server application after it determines the upload is complete. The server application processes the file and generates the reply. The BITS server sets the value of BITS-Reply-URL to the URL of the reply file from the server application.

</dd> <dt>

<span id="Content-Length"></span><span id="content-length"></span><span id="CONTENT-LENGTH"></span>Content-Length
</dt> <dd>

Replace length with the number of bytes included in the body of the response. Content-Length is required, even if the body of the response does not include content.

</dd> <dt>

<span id="BITS-Error-Code"></span><span id="bits-error-code"></span><span id="BITS-ERROR-CODE"></span>BITS-Error-Code
</dt> <dd>

Replace error-code with a hexadecimal number that represents an HRESULT value associated with a server-side error. Only include this header if reason-code is not 200 or 201.

</dd> <dt>

<span id="BITS-Error-Context"></span><span id="bits-error-context"></span><span id="BITS-ERROR-CONTEXT"></span>BITS-Error-Context
</dt> <dd>

Replace error-context with a hexadecimal number that represents the context in which the error occurred. Specify the hexadecimal number for [**BG\_ERROR\_CONTEXT\_REMOTE\_FILE**](/windows/win32/api/bits/ne-bits-bg_error_context) (0x5) if the server generated the error. Otherwise, specify the hexadecimal number for **BG\_ERROR\_CONTEXT\_REMOTE\_APPLICATION** (0x7) if the error was generated by the application to which the upload file is passed. Include this header only if the reason-code is not 200 or 201.

</dd> </dl>

## Remarks

If the session is for an upload-reply job, there may be a delay before the client receives the final **Ack for Fragment** response. The length of the delay depends on the amount of time the server application (application to which the server posts the upload file) takes to generate the reply.

## See also

<dl> <dt>

[**Create-Session**](create-session.md)
</dt> <dt>

[**Fragment**](fragment.md)
</dt> </dl>

 

 





