---
description: The following constants represent the possible logging modes for an event tracing session.
ms.assetid: d12aaecb-776a-4476-9ba4-16af30fde9c2
title: Logging Mode Constants
ms.topic: article
ms.date: 06/03/2020
---

# Logging Mode Constants

The following constants represent the possible logging modes for an event tracing session.

The constants are used in the **LogFileMode** members of [**EVENT\_TRACE\_LOGFILE**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea), [**EVENT\_TRACE\_PROPERTIES**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) and [**TRACE\_LOGFILE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-trace_logfile_header) structures. These constants are defined in the *Evntrace.h* header file.




| Mode | Description | 
|------|-------------|
| <strong>EVENT_TRACE_FILE_MODE_NONE</strong> (0x00000000) | Same as <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> with no maximum file size specified. | 
| <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> (0x00000001) | Writes events to a log file sequentially; stops when the file reaches its maximum size.Do not use with <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> or <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> (0x00000002) | Writes events to a log file. After the file reaches the maximum size, the oldest events are replaced with incoming events.Note that the contents of the circular log file may appear out of order on multiprocessor computers.<br /> Do not use with <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>, or <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> (0x00000004) | Appends events to an existing sequential log file. If the file does not exist, it is created. Use only if you specify <a href="wnode-header.md"><strong>system time</strong></a> for the clock resolution, otherwise, <a href="/windows/win32/api/evntrace/nf-evntrace-processtrace"><strong>ProcessTrace</strong></a> will return events with incorrect time stamps. When using <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, the values for <strong>BufferSize</strong>, <strong>NumberOfProcessors</strong>, and <strong>ClockType</strong> must be explicitly provided and must be the same in both the logger and the file being appended.<br /> Do not use with <strong>EVENT_TRACE_REAL_TIME_MODE</strong>, <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>, or <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong> (0x00000008) | Automatically switches to a new log file when the file reaches the maximum size. The <strong>MaximumFileSize</strong> member of <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a> must be set.The specified file name must be a formatted string (for example, the string contains a %d, such as c:\test%d.etl). Each time a new file is created, a counter is incremented and its value is used, the formatted string is updated, and the resulting string is used as the file name.<br /> This option is not allowed for private event tracing sessions and should not be used for NT kernel logger sessions.<br /> Do not use with <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> or <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_PREALLOCATE</strong>(0x00000020) | Reserves <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES.MaximumFileSize</strong></a> bytes of disk space for the log file in advance. The file occupies the entire space during logging, for both circular and sequential log files. When you stop the session, the log file is reduced to the size needed. You must set <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES.MaximumFileSize</strong></a>.<br /> You cannot use the mode for private event tracing sessions.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_NONSTOPPABLE_MODE</strong>(0x00000040) | The logging session cannot be stopped. This mode is only supported by Autologger.This option is supported on Windows Vista and later.<br />. | 
| <strong>EVENT_TRACE_SECURE_MODE</strong> (0X00000080) | Restricts who can log events to the session to those with <a href="/windows/desktop/api/Evntcons/nf-evntcons-eventaccesscontrol"><strong>TRACELOG_LOG_EVENT</strong></a> permission. This option is supported on Windows Vista and later.<br /> | 
| <strong>EVENT_TRACE_REAL_TIME_MODE</strong> (0x00000100) | Delivers the events to consumers in real-time. Events are delivered when the buffers are flushed, not at the time the provider writes the event. You should not enable real-time mode if there are no consumers to consume the events because calls to log events will eventually fail when the buffers become full. Prior to Windows Vista, if the events were not being consumed, the events were discarded.Do not specify more than one real-time consumer in one process on Windows XP orWindows Server 2003. Instead, have one thread consume events and distribute the events to others.<br /><strong>Prior to Windows Vista:</strong> You should not use real-time mode because the supported event rate is much lower than reading from the log file (events may be dropped). Also, the event order is not guaranteed on computers with multiple processors. The real-time mode is more suitable for low-traffic, notification type events.<br /><br /> You can combine this mode with other log file modes; however, do not use this mode with EVENT_TRACE_PRIVATE_LOGGER_MODE. Note that if you combine this mode with other log file modes, buffers will be flushed once every second, resulting in partially filled buffers being written to your log file. For example if you use 64k buffers and your logging rate is 1 event every second, the service will write 64k/second to your log file.<br /> | 
| <strong>EVENT_TRACE_DELAY_OPEN_FILE_MODE</strong>(0x00000200) | This mode is used to delay opening the log file until an event occurs. <br /><blockquote><strong>Note:</strong><br />On Windows Vista or later, this mode is not applicable should not be used.</blockquote><br /> | 
| <strong>EVENT_TRACE_BUFFERING_MODE</strong> (0x00000400) | This mode writes events to a circular memory buffer. Events written beyond the total size of the buffer evict the oldest events still remaining in the buffer. The size of this memory buffer is the product of <strong>MinimumBuffers</strong> and <strong>BufferSize</strong> (see <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>).As a consequence of this formula, any buffer that uses <strong>EVENT_TRACE_BUFFERING_MODE</strong> will ignore the <strong>MaximumBuffers</strong> value.<br /> Events are not written to a log file or delivered in real-time, and ETW does not flush the buffers. To get a snapshot of the buffer, call the <a href="/windows/win32/api/evntrace/nf-evntrace-flushtracea"><strong>FlushTrace</strong></a> function.<br /> This mode is particularly useful for debugging device drivers in conjunction with the ability to view the contents of in-memory buffers with the <a href="/windows-hardware/drivers/devtest/trace-session">WMITrace</a> kernel debugger extension.<br /> Do not use with <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>, <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>, or <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> (0x00000800) | Creates a user-mode event tracing session that runs in the same process as its event trace provider. The memory for buffers comes from the process's memory. Processes that do not require data from the kernel can eliminate the overhead associated with kernel-mode transitions by using a private event tracing session.<br /> If the provider is registered by multiple processes, ETW appends the process identifier to the log file name to create a unique log file name. For example, if the controller specifies the log file names as c:\mylogs\myprivatelog.etl, ETW creates the log file as c:\mylogs\myprivatelog.etl_nnnn, where nnnn is the process identifier. The process identifier is not appended to the first process that registers the provider, it is appended to only the subsequent processes that register the provider.<br /> Private event tracing sessions have the following limitations:<br /><ul><li>A private session can record events only for the threads of the process in which it is executing.</li><li>There can be up to eight private session per process.</li><li>Private sessions cannot be used with real-time delivery.</li><li>Events that are generated by a private session do not include execution time for kernel-mode versus user-mode instructions, or thread-level detail of the CPU time used.</li></ul>Process ID filters and executable name filters can now be passed in to session control APIs when system wide private loggers are started. For the best results in cross process scenarios, the same filters should be passed to every control operation during the session, including provider enable/diasble calls. Note that the filters have the same format as those consumed by <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a>. <br /> You can use this mode in conjunction with the <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> mode.<br /><strong>Prior to Windows 10, version 1703:</strong> Only LocalSystem, the administrator, and users in the administrator group that run in an elevated process can create a private session. If you include the <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> flag, any user can create an in-process private session. Also, in prior versions of Windows, there can only be one private session per process (unless the EVENT_TRACE_PRIVATE_IN_PROC mode is also specified, in which case you can create up to three in-process private sessions). <br /><strong>Prior to Windows Vista:</strong> Users in the Performance Log Users group could also create a private session.<br /><br /> Do not use with EVENT_TRACE_REAL_TIME_MODE.<br /><strong>Prior to Windows 7 and Windows Server 2008 R2:</strong> Do not use with EVENT_TRACE_FILE_MODE_NEWFILE.<br /> | 
| <strong>EVENT_TRACE_ADD_HEADER_MODE</strong>(0x00001000) | This option adds a header to the log file.<br /><blockquote><strong>Note:</strong><br />On Windows Vista or later, this mode is not applicable should not be used.</blockquote><br /> | 
| <strong>EVENT_TRACE_USE_KBYTES_FOR_SIZE</strong>(0x00002000) | Use kilobytes as the unit of measure for specifying the size of a file. The default unit of measure is megabytes. This mode applies to the <strong>MaxFileSize</strong> registry value for an <a href="configuring-and-starting-an-autologger-session.md">AutoLogger</a> session and the <strong>MaximumFileSize</strong> member of <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>. This option is supported on Windows Vista and later.<br /> | 
| <strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong>(0x00004000) | Uses sequence numbers that are unique across event tracing sessions. This mode only applies to events logged using the <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>TraceMessage</strong></a> function. For more information, see <strong>TraceMessage</strong> for usage details.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> and <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> are mutually exclusive.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> (0x00008000) | Uses sequence numbers that are unique only for an individual event tracing session. This mode only applies to events logged using the <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>TraceMessage</strong></a> function. For more information, see <strong>TraceMessage</strong> for usage details.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> and <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> are mutually exclusive.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_RELOG_MODE</strong> (0x00010000) | Logs the event without including <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_header"><strong>EVENT_TRACE_HEADER</strong></a>.<blockquote><strong>Note:</strong><br />This mode should not be used. It is reserved for internal use.</blockquote><br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> (0x00020000) | Use in conjunction with the <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> mode to start a private session. This mode enforces that only the process that registered the provider GUID can start the logger session with that GUID.<br /> You can create up to three in-process private sessions per process.<br /> This option is supported on Windows Vista and later.<br /> | 
| <strong>EVENT_TRACE_MODE_RESERVED</strong>(0x00100000) | This option is used to signal heap and critical section tracing. This option is supported on Windows Vista and later.<br /> | 
| <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong>(0x00400000) | This option stops logging on hybrid shutdown. If neither <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> or <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> is specified, ETW will chose a default based on whether the caller is coming from Session 0 or not.This option is supported on Windows 8 and Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong>(0x00800000) | This option continues logging on hybrid shutdown. If neither <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> or <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> is specified, ETW will chose a default based on whether the caller is coming from Session 0 or not.This option is supported on Windows 8 and Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_USE_PAGED_MEMORY</strong> (0x01000000) | Uses paged memory. This setting is recommended so that events do not use up the nonpaged memory.Nonpaged buffers use nonpaged memory for buffer space. Because nonpaged buffers are never paged out, a logging session performs well. Using pageable buffers is less resource-intensive.<br /> Kernel-mode providers and system loggers cannot log events to sessions that specify this logging mode.<br /> This mode is ignored if <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> is set.<br /> You cannot use this mode with the NT Kernel Logger.<br /><strong>Windows 2000:</strong> This value is not supported.<br /> | 
| <strong>EVENT_TRACE_SYSTEM_LOGGER_MODE</strong>(0x02000000) | This option will receive events from SystemTraceProvider. If the <a href="/windows/win32/api/evntrace/nf-evntrace-starttracea"><strong>StartTrace</strong></a><em>Properties</em> parameter <strong>LogFileMode</strong> includes this flag, the logger will be a system logger.This option is supported on Windows 8 and Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_INDEPENDENT_SESSION_MODE</strong>(0x08000000) | Indicates that a logging session should not be affected by <a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwrite"><strong>EventWrite</strong></a> failures in other sessions. Without this flag, if an event cannot be published to one of the sessions that a provider is enabled to, the event will not get published to any of the sessions. When this flag is set, a failure to write an event to one session will not cause the <strong>EventWrite</strong> function to return an error code in other sessions. <br /> Do not use with <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>. <br /> This option is supported on Windows 8.1, Windows Server 2012 R2, and later.<br /> | 
| <strong>EVENT_TRACE_NO_PER_PROCESSOR_BUFFERING</strong> (0x10000000) | Writes events that were logged on different processors to a common buffer. Using this mode can eliminate the issue of events appearing out of order when events are being published on different processors using system time. This mode can also eliminate the issue with circular logs appearing to drop events on multiple processor computers.<br /> If you do not use this mode and you use system time, the events may appear out of order on multiple processor computers. This is because ETW buffers are associated with a processor instead of a thread. As a result, if a thread is switched from one CPU to another, the buffer associated with the latter CPU can be flushed to disk before the one associated with the former CPU.<br /> If you expect a high volume of events (for example, more than 1,000 events per second), you should not use this mode.<br /> Note that the processor number is not included with the event.<br /> This option is supported on Windows 7, Windows Server 2008 R2, and later.<br /> | 
| <strong>EVENT_TRACE_ADDTO_TRIAGE_DUMP</strong>(0x80000000) | This option adds ETW buffers to triage dumps. This option is supported on Windows 8 and Windows Server 2012. <br /> | 

