---
title: Memory Management Routines
description: Memory Management Routines
ms.assetid: '6CBD95DA-EF34-47C2-8AAC-03787F81722E'
---

# Memory Management Routines

## 

This section lists the memory management routines supplied by the Storport driver.

## In this section



| Topic                                                                                                                   | Description                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**StorPortAllocateContiguousMemorySpecifyCacheNode**](storportallocatecontiguousmemoryspecifycachenode.md)<br/> | The **StorPortAllocateContiguousMemorySpecifyCacheNode** routine allocates a range of physically contiguous noncached, nonpaged memory.<br/>                                                                                                                                                                                                                                 |
| [**StorPortAllocateHostMemoryBuffer**](storportallocatehostmemorybuffer.md)<br/>                                 | This function allocates one or more ranges of physically contiguous memory to be used as a Host Memory Buffer (HMB). This is memory that the device may use directly and exclusively. The device may use this memory however it sees fit, but it must ensure that there is no data loss or data corruption in the event of a surprise removal or unexpected power loss.<br/> |
| [**StorPortAllocateMdl**](storportallocatemdl.md)<br/>                                                           | The **StorPortAllocateMdl** routine allocates an MDL to describe the given non-paged pool memory.<br/>                                                                                                                                                                                                                                                                       |
| [**StorPortAllocatePool**](storportallocatepool.md)<br/>                                                         | The **StorPortAllocatePool** routine allocates a block of non-contiguous, non-paged pool memory.<br/>                                                                                                                                                                                                                                                                        |
| [**StorPortAllocateRegistryBuffer**](storportallocateregistrybuffer.md)<br/>                                     | The **StorPortAllocateRegistryBuffer** routine is called by the miniport driver to allocate a buffer that can be used to read and write registry data. <br/>                                                                                                                                                                                                                 |
| [**StorPortBuildMdlForNonPagedPool**](storportbuildmdlfornonpagedpool.md)<br/>                                   | The **StorPortBuildMdlForNonPagedPool** routine updates the MDL to describe the associated non-paged memory.<br/>                                                                                                                                                                                                                                                            |
| [**StorPortConvertUlongToPhysicalAddress**](storportconvertulongtophysicaladdress.md)<br/>                       | The **StorPortConvertUlongToPhysicalAddress** routine converts an unsigned long address into a physical address.<br/>                                                                                                                                                                                                                                                        |
| [**StorPortFreeContiguousMemorySpecifyCache**](storportfreecontiguousmemoryspecifycache.md)<br/>                 | The **StorPortFreeContiguousMemorySpecifyCache** routine deallocates a range of noncached memory in the nonpaged portion of the system address space.<br/>                                                                                                                                                                                                                   |
| [**StorPortFreeHostMemoryBuffer**](storportfreehostmemorybuffer.md)<br/>                                         | The **StorPortFreeHostMemoryBuffer** routine frees the physically contiguous memory that was allocated to be used for a Host Memory Buffer (HMB) <br/>                                                                                                                                                                                                                       |
| [**StorPortFreeMdl**](storportfreemdl.md)<br/>                                                                   | The **StorPortFreeMdl** routine frees a memory descriptor list (MDL) describing non-paged pool memory.<br/>                                                                                                                                                                                                                                                                  |
| [**StorPortFreePool**](storportfreepool.md)<br/>                                                                 | The **StorPortFreePool** routine frees a block of memory that was previously allocated by a call to the [**StorPortAllocatePool**](storportallocatepool.md) routine.<br/>                                                                                                                                                                                                   |
| [**StorPortFreeRegistryBuffer**](storportfreeregistrybuffer.md)<br/>                                             | The **StorPortFreeRegistryBuffer** routine frees the buffer that was allocated for storing registry data. <br/>                                                                                                                                                                                                                                                              |
| [**StorPortGetDataInBufferMdl**](storportgetdatainbuffermdl.md)<br/>                                             | Returns an MDL associated with the input data buffer of a SCSI request block (SRB).<br/>                                                                                                                                                                                                                                                                                     |
| [**StorPortGetDataInBufferScatterGatherList**](storportgetdatainbufferscattergatherlist.md)<br/>                 | Returns the scatter-gather list associated with the input data buffer of a SCSI request block (SRB).<br/>                                                                                                                                                                                                                                                                    |
| [**StorPortGetDataInBufferSystemAddress**](storportgetdatainbuffersystemaddress.md)<br/>                         | Returns the system address for the input data buffer of a SCSI request block (SRB).<br/>                                                                                                                                                                                                                                                                                     |
| [**StorPortGetOriginalMdl**](storportgetoriginalmdl.md)<br/>                                                     | The [**StorPortGetOriginalMdl**](storportgetoriginalmdl.md) routine returns the MDL associated with the given SRB.<br/>                                                                                                                                                                                                                                                     |
| [**StorPortGetPfns**](storportgetpfns.md)<br/>                                                                   | The **StorPortGetPfns** routine can be called when a miniport needs to retreive PFNs associated with a MDL for a SRB <br/>                                                                                                                                                                                                                                                   |
| [**StorPortGetPhysicalAddress**](storportgetphysicaladdress.md)<br/>                                             | The **StorPortGetPhysicalAddress** routine converts a given virtual address range to a physical address range for a DMA operation.<br/>                                                                                                                                                                                                                                      |
| [**StorPortGetSystemAddress**](storportgetsystemaddress.md)<br/>                                                 | The [**StorPortGetSystemAddress**](storportgetsystemaddress.md) routine returns a virtual address in system space for the data buffer of the specified SCSI request block (SRB).<br/>                                                                                                                                                                                       |
| [**StorPortGetUncachedExtension**](storportgetuncachedextension.md)<br/>                                         | The **StorPortGetUncachedExtension** routine allocates an uncached common buffer to be shared by the CPU and the device. <br/>                                                                                                                                                                                                                                               |
| [**StorPortGetVirtualAddress**](storportgetvirtualaddress.md)<br/>                                               | The **StorPortGetVirtualAddress** routine obtains a virtual address that maps to the indicated physical address. <br/>                                                                                                                                                                                                                                                       |
| [**StorPortMarkDumpMemory**](storportmarkdumpmemory.md)<br/>                                                     | A miniport should mark memory used for the dump file or the hibernation file. Marked memory is retained and remains valid after a resume from hibernation operation. The memory to mark is specified by an address and range length in a call to **StorPortMarkDumpMemory**.<br/>                                                                                            |
| [**StorPortMoveMemory**](storportmovememory.md)<br/>                                                             | The **StorPortMoveMemory** routine copies memory from one buffer to another.<br/>                                                                                                                                                                                                                                                                                            |



 

 

 

[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20%5Bstorage\storage%5D:%20Memory%20Management%20Routines%20%20RELEASE:%20%283/29/2018%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/default.aspx. "Send comments about this topic to Microsoft")





